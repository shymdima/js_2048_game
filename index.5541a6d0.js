!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var r=new(function(){var e;function r(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r)}return e=[{key:"areArraysEqual",value:function(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})}},{key:"createRandomNumbers",value:function(e){1>=Math.floor(11*Math.random())?e.textContent="4":e.textContent="2",e.className="field-cell cell-".concat(e.textContent)}},{key:"initiateGame",value:function(){var e,t=document.querySelectorAll(".field-cell"),n=Math.floor(16*Math.random());do e=Math.floor(16*Math.random());while(e===n)this.createRandomNumbers(t[n]),this.createRandomNumbers(t[e])}},{key:"moveZerosToEnd",value:function(e){for(var n=e.filter(function(e){return 0!==e}),r=1;r<n.length;r++)n[r]===n[r-1]&&(n[r-1]*=2,2048===n[r-1]&&this.gameWin(),n[r]=0,this.getScore(n[r-1]),r--);n=n.filter(function(e){return 0!==e});var o=e.length-n.length;return t(n).concat(t(Array(o).fill(0)))}},{key:"moveZerosToStart",value:function(e){for(var n=e.filter(function(e){return 0!==e}),r=1;r<n.length;r++)n[r]===n[r-1]&&(n[r-1]*=2,2048===n[r-1]&&this.gameWin(),n[r]=0,this.getScore(n[r-1]),r--);return n=n.filter(function(e){return 0!==e}),t(Array(e.length-n.length).fill(0)).concat(t(n))}},{key:"getScore",value:function(e){var t=document.querySelector(".game-score"),n=+t.textContent;n+=e,t.textContent=n}},{key:"moveLeftEventListener",value:function(e){var n=this;if("ArrowLeft"===e.key){var r=document.querySelectorAll(".field-row"),o=t(document.querySelectorAll(".field-cell")).map(function(e){return parseInt(e.textContent)||0});r.forEach(function(e){var r=t(e.querySelectorAll("td")),o=r.map(function(e){return parseInt(e.textContent)||0}),i=n.moveZerosToEnd(o);e.innerHTML="",i.forEach(function(t,n){var o=r[n];0===t?(o.textContent="",o.className="field-cell"):(o.textContent=t,o.className="field-cell cell-".concat(t)),e.appendChild(o)})});var i=t(document.querySelectorAll(".field-cell")).map(function(e){return parseInt(e.textContent)||0});this.areArraysEqual(o,i)?this.gameOver():this.addCell()}}},{key:"moveLeft",value:function(){window.addEventListener("keydown",this.boundMoveLeftListener)}},{key:"moveRightEventListener",value:function(e){var n=this;if("ArrowRight"===e.key){var r=document.querySelectorAll(".field-row"),o=t(document.querySelectorAll(".field-cell")).map(function(e){return parseInt(e.textContent)||0});r.forEach(function(e){var r=t(e.querySelectorAll("td")),o=r.map(function(e){return parseInt(e.textContent)||0}),i=n.moveZerosToStart(o);e.innerHTML="",i.forEach(function(t,n){var o=r[n];0===t?(o.textContent="",o.className="field-cell"):(o.textContent=t,o.className="field-cell cell-".concat(t)),e.appendChild(o)})});var i=t(document.querySelectorAll(".field-cell")).map(function(e){return parseInt(e.textContent)||0});this.areArraysEqual(o,i)?this.gameOver():this.addCell()}}},{key:"moveRight",value:function(){window.addEventListener("keydown",this.boundMoveRightListener)}},{key:"moveUpEventListener",value:function(e){var n=this;if("ArrowUp"===e.key){var r=document.querySelectorAll(".field-row"),o=[[],[],[],[]],i=t(document.querySelectorAll(".field-cell")).map(function(e){return parseInt(e.textContent)||0});r.forEach(function(e){for(var t=0;t<4;t++){var n=e.querySelector("td:nth-child(".concat(t+1,")"));n&&o[t].push(n)}}),o.forEach(function(e){var t=e.map(function(e){return parseInt(e.textContent)||0});n.moveZerosToEnd(t).forEach(function(t,n){0===t?(e[n].textContent="",e[n].className="field-cell"):(e[n].textContent=t,e[n].className="field-cell cell-".concat(t))})});var a=t(document.querySelectorAll(".field-cell")).map(function(e){return parseInt(e.textContent)||0});this.areArraysEqual(i,a)?this.gameOver():this.addCell()}}},{key:"moveUp",value:function(){window.addEventListener("keydown",this.boundMoveUpListener)}},{key:"moveDownEventListener",value:function(e){var n=this;if("ArrowDown"===e.key){var r=document.querySelectorAll(".field-row"),o=[[],[],[],[]],i=t(document.querySelectorAll(".field-cell")).map(function(e){return parseInt(e.textContent)||0});r.forEach(function(e){for(var t=0;t<4;t++){var n=e.querySelector("td:nth-child(".concat(t+1,")"));n&&o[t].push(n)}}),o.forEach(function(e){var t=e.map(function(e){return parseInt(e.textContent)||0});n.moveZerosToStart(t).forEach(function(t,n){0===t?(e[n].textContent="",e[n].className="field-cell"):(e[n].textContent=t,e[n].className="field-cell cell-".concat(t))})});var a=t(document.querySelectorAll(".field-cell")).map(function(e){return parseInt(e.textContent)||0});this.areArraysEqual(i,a)?this.gameOver():this.addCell()}}},{key:"moveDown",value:function(){window.addEventListener("keydown",this.boundMoveDownListener)}},{key:"getStatus",value:function(){}},{key:"startFunction",value:function(){var e=document.querySelector(".start"),t=document.querySelector(".message-start");e&&(e.textContent="Restart",e.classList.remove("start"),e.classList.add("restart"),t&&(t.classList.add("hidden"),this.boundMoveLeftListener=this.moveLeftEventListener.bind(this),this.boundMoveRightListener=this.moveRightEventListener.bind(this),this.boundMoveUpListener=this.moveUpEventListener.bind(this),this.boundMoveDownListener=this.moveDownEventListener.bind(this),this.moveLeft(),this.moveRight(),this.moveUp(),this.moveDown(),this.restart(),this.initiateGame()))}},{key:"start",value:function(){var e=document.querySelector(".start");e?e.addEventListener("click",this.startFunction.bind(this)):e.removeEventListener("click",this.startFunction.bind(this))}},{key:"restart",value:function(){var e=this,n=document.querySelector(".restart");n&&n.addEventListener("click",function(){var n=document.querySelector(".game-score"),r=document.querySelectorAll(".field-cell");if(2===t(r).map(function(e){return parseInt(e.textContent)||0}).filter(function(e){return 0!==e}).length&&"0"===n.textContent);else{r.forEach(function(e){e.textContent="",e.className="field-cell"}),e.addCell(),e.addCell(),n.textContent=0;var o=document.querySelector(".message-lose"),i=document.querySelector(".message-win");o.classList.add("hidden"),i.classList.add("hidden")}})}},{key:"checkBeforeGameOver",value:function(){var e=document.querySelectorAll(".field-row"),r=[[],[],[],[]];e.forEach(function(e){for(var t=0;t<4;t++){var n=e.querySelector("td:nth-child(".concat(t+1,")"));n&&r[t].push(n)}});var o=!0,i=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=function(){for(var e=l.value,n=t(e.querySelectorAll("td")).map(function(e){return parseInt(e.textContent)||0}),r=0;r<n.length-1;r++)if(0===n[r]||n[r]===n[r+1])return{v:!1}}();if("object"===n(u))return u.v}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}var s=!0,d=!1,f=void 0;try{for(var v,m=r[Symbol.iterator]();!(s=(v=m.next()).done);s=!0){var h=function(){for(var e=v.value.map(function(e){return parseInt(e.textContent)||0}),t=0;t<e.length-1;t++)if(0===e[t]||e[t]===e[t+1])return{v:!1}}();if("object"===n(h))return h.v}}catch(e){d=!0,f=e}finally{try{s||null==m.return||m.return()}finally{if(d)throw f}}return!0}},{key:"gameWin",value:function(){document.querySelector(".message-win").classList.remove("hidden"),window.removeEventListener("keydown",this.boundMoveUpListener),window.removeEventListener("keydown",this.boundMoveDownListener),window.removeEventListener("keydown",this.boundMoveLeftListener),window.removeEventListener("keydown",this.boundMoveRightListener)}},{key:"gameOver",value:function(){this.checkBeforeGameOver()&&(document.querySelector(".message-lose").classList.remove("hidden"),window.removeEventListener("keydown",this.boundMoveUpListener),window.removeEventListener("keydown",this.boundMoveDownListener),window.removeEventListener("keydown",this.boundMoveLeftListener),window.removeEventListener("keydown",this.boundMoveRightListener))}},{key:"addCell",value:function(){var e=t(document.querySelectorAll(".field-cell")).filter(function(e){return 0===e.textContent.length}),n=Math.floor(Math.random()*e.length);this.createRandomNumbers(e[n])}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(r.prototype,e),r}());r.start(),r.restart()}();
//# sourceMappingURL=index.5541a6d0.js.map
